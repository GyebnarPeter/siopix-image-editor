<?php
/*
if(!isset($_SESSION['cart'])){
    $_SESSION['cart']=array();
}

if($_SESSION["loggedIn"] != true){
    echo 'not logged in';
    header("Location: login_page.php");
    exit;
}*/

session_start();

echo '<pre>';
var_dump($_SESSION);
echo '</pre>';

include "../classes/Database.php";
include "../classes/Users.php";
include "../classes/LoginAdmin.php";


if (isset($_SESSION['admin_id']) && is_numeric($_SESSION['admin_id'])){

    $id = $_SESSION['admin_id'];

    $login = new LoginAdmin();

    $result = $login->check_admin_login($id);

    if($result) {
        $user = new Users();
        $user_data = $user->get_admin_data($id);

        if (!$user_data) {
            header("Location: ../admin/login.php");
            die;
        }
    } else {
        header("Location: ../admin/login.php");
        die;
    }

} else {
    header("Location: ../admin/login.php");
    die;
}
?>

<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIONWEBDESIGN E-COMMERCE SYSTEM</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link href="libs/bootstrap-3.3.7-dist/css/bootstrap.css" rel="stylesheet" media="screen" />

    <link rel="stylesheet" href="libs/style.css">
    <script src="libs/main.js"></script>
    <script src="https://cdn.ckeditor.com/4.16.0/standard/ckeditor.js"></script>
    <script src="https://cdn.ckeditor.com/ckeditor5/28.0.0/classic/ckeditor.js"></script>
</head>
<body>
<div class="top-bar">
    <div class="container">
        <div class="menu-btn">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <button type="button" class="btn btn-danger homepage" onclick="homePage()">Webshop</button>
        <a href='logout.php' class="logout">
            <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                 viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">

                <path d="M255.15,468.625H63.787c-11.737,0-21.262-9.526-21.262-21.262V64.638c0-11.737,9.526-21.262,21.262-21.262H255.15
                c11.758,0,21.262-9.504,21.262-21.262S266.908,0.85,255.15,0.85H63.787C28.619,0.85,0,29.47,0,64.638v382.724
                c0,35.168,28.619,63.787,63.787,63.787H255.15c11.758,0,21.262-9.504,21.262-21.262
                C276.412,478.129,266.908,468.625,255.15,468.625z"/>

                <path d="M505.664,240.861L376.388,113.286c-8.335-8.25-21.815-8.143-30.065,0.213s-8.165,21.815,0.213,30.065l92.385,91.173
                H191.362c-11.758,0-21.262,9.504-21.262,21.262c0,11.758,9.504,21.263,21.262,21.263h247.559l-92.385,91.173
                c-8.377,8.25-8.441,21.709-0.213,30.065c4.167,4.21,9.653,6.336,15.139,6.336c5.401,0,10.801-2.041,14.926-6.124l129.276-127.575
                c4.04-3.997,6.336-9.441,6.336-15.139C512,250.302,509.725,244.88,505.664,240.861z"/>
                </svg>

        </a>
    </div>

</div>
<div class="app">
    <div class="sidebar">
        <li><a href="index.php">
                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                     viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
		    <path d="M337.92,89.845C161.28,33.525,0,164.085,0,333.045c0,23.04,2.56,66.56,10.24,92.16c0,5.12,5.12,10.24,10.24,10.24h468.48
			c5.12,0,10.24-5.12,12.8-10.24c5.12-25.6,10.24-69.12,10.24-92.16C512,222.965,442.88,123.125,337.92,89.845z M256,128.245
			c15.36,0,25.6,10.24,25.6,25.6c0,15.36-10.24,25.6-25.6,25.6s-25.6-10.24-25.6-25.6C230.4,138.485,240.64,128.245,256,128.245z
			 M76.8,358.645c-15.36,0-25.6-10.24-25.6-25.6c0-15.36,10.24-25.6,25.6-25.6s25.6,10.24,25.6,25.6
			C102.4,348.405,92.16,358.645,76.8,358.645z M148.48,225.525c-10.24,10.24-25.6,10.24-35.84,0c-10.24-10.24-10.24-28.16-2.56-38.4
			c10.24-10.24,25.6-10.24,35.84,0S156.16,215.285,148.48,225.525z M256,384.245c-28.16,0-53.76-25.6-46.08-51.2
			c7.68-25.6,46.08-102.4,46.08-102.4s38.4,76.8,46.08,102.4C309.76,358.645,284.16,384.245,256,384.245z M401.92,225.525
			c-10.24,10.24-25.6,10.24-35.84,0s-10.24-25.6,0-35.84s25.6-10.24,35.84,0C409.6,197.365,409.6,215.285,401.92,225.525z
			 M435.2,358.645c-15.36,0-25.6-10.24-25.6-25.6c0-15.36,10.24-25.6,25.6-25.6s25.6,10.24,25.6,25.6
			C460.8,348.405,450.56,358.645,435.2,358.645z"/>
			</svg>

                Vezérlőpult</a></li>
        <li><a href="orders.php">
                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                     viewBox="0 0 477.867 477.867" style="enable-background:new 0 0 477.867 477.867;" xml:space="preserve">

            <path d="M426.667,0H51.2C22.923,0,0,22.923,0,51.2v375.467c0,28.277,22.923,51.2,51.2,51.2h375.467
                c28.277,0,51.2-22.923,51.2-51.2V51.2C477.867,22.923,454.944,0,426.667,0z M443.733,426.667c0,9.426-7.641,17.067-17.067,17.067
                H51.2c-9.426,0-17.067-7.641-17.067-17.067V51.2c0-9.426,7.641-17.067,17.067-17.067h375.467c9.426,0,17.067,7.641,17.067,17.067
                V426.667z"/>

                    <path d="M153.6,102.4h-51.2c-9.426,0-17.067,7.641-17.067,17.067s7.641,17.067,17.067,17.067h51.2
                c9.426,0,17.067-7.641,17.067-17.067S163.026,102.4,153.6,102.4z"/>

                    <path d="M375.467,102.4h-153.6c-9.426,0-17.067,7.641-17.067,17.067s7.641,17.067,17.067,17.067h153.6
                c9.426,0,17.067-7.641,17.067-17.067S384.892,102.4,375.467,102.4z"/>

                    <path d="M153.6,221.867h-51.2c-9.426,0-17.067,7.641-17.067,17.067S92.974,256,102.4,256h51.2c9.426,0,17.067-7.641,17.067-17.067
                S163.026,221.867,153.6,221.867z"/>

                    <path d="M375.467,221.867h-153.6c-9.426,0-17.067,7.641-17.067,17.067S212.441,256,221.867,256h153.6
                c9.426,0,17.067-7.641,17.067-17.067S384.892,221.867,375.467,221.867z"/>

                    <path d="M153.6,341.333h-51.2c-9.426,0-17.067,7.641-17.067,17.067s7.641,17.067,17.067,17.067h51.2
                c9.426,0,17.067-7.641,17.067-17.067S163.026,341.333,153.6,341.333z"/>

                    <path d="M375.467,341.333h-153.6c-9.426,0-17.067,7.641-17.067,17.067s7.641,17.067,17.067,17.067h153.6
                c9.426,0,17.067-7.641,17.067-17.067S384.892,341.333,375.467,341.333z"/>
            </svg>

                Rendelések</a></li>
        <li style="pointer-events: none; opacity: 0.6;"><a href="termek-feltoltes.php">
                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                     viewBox="0 0 433.5 433.5" style="enable-background:new 0 0 433.5 433.5;" xml:space="preserve">

            <g id="file-upload">
                <polygon points="140.25,331.5 293.25,331.5 293.25,178.5 395.25,178.5 216.75,0 38.25,178.5 140.25,178.5 		"/>
                <rect x="38.25" y="382.5" width="357" height="51"/>

            </svg>
                Új termék feltöltése</a></li>


        <!-- <li><a href="meret-kezelese.php">
         <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
         viewBox="0 0 32.529 32.529" style="enable-background:new 0 0 32.529 32.529;"
         xml:space="preserve">
         <path d="M18.72,13.811c-0.846-0.846-0.846-2.217,0-3.063l6.168-6.168l-3.131-0.254c-0.533-0.045-1.006-0.277-1.357-0.628
         c-0.434-0.434-0.682-1.048-0.627-1.707c0.1-1.192,1.145-2.08,2.334-1.983l7.799,0.635c1.059,0.088,1.896,0.927,1.982,1.983
         l0.635,7.797c0.098,1.191-0.791,2.236-1.982,2.334c-1.19,0.097-2.235-0.791-2.334-1.983l-0.254-3.129l-6.168,6.167
         C20.937,14.659,19.565,14.659,18.72,13.811z M10.747,18.719l-6.166,6.167l-0.256-3.13c-0.098-1.192-1.143-2.08-2.334-1.982
         c-1.193,0.099-2.08,1.144-1.984,2.333l0.635,7.8c0.086,1.056,0.927,1.895,1.984,1.98l7.797,0.635
         c1.191,0.099,2.236-0.791,2.334-1.981c0.055-0.659-0.193-1.273-0.627-1.708c-0.352-0.353-0.822-0.582-1.355-0.627L7.644,27.95
         l6.166-6.167c0.849-0.848,0.849-2.219,0.002-3.063C12.964,17.872,11.593,17.872,10.747,18.719z M30.538,19.772
         c-0.66-0.055-1.273,0.193-1.707,0.627c-0.353,0.353-0.584,0.823-0.627,1.356l-0.256,3.13l-6.166-6.167
         c-0.849-0.846-2.22-0.846-3.062,0c-0.849,0.846-0.849,2.218,0,3.063l6.166,6.167l-3.132,0.254c-1.19,0.098-2.077,1.144-1.981,2.335
         c0.099,1.19,1.144,2.08,2.337,1.982l7.795-0.636c1.057-0.086,1.896-0.925,1.983-1.981l0.633-7.799
         C32.619,20.915,31.731,19.869,30.538,19.772z M7.644,4.58l3.131-0.254c1.191-0.098,2.078-1.143,1.982-2.336
         c-0.099-1.192-1.144-2.079-2.335-1.983L2.623,0.643C1.568,0.729,0.727,1.568,0.642,2.626l-0.635,7.797
         c-0.097,1.192,0.79,2.236,1.983,2.334c0.657,0.054,1.272-0.193,1.707-0.628c0.353-0.351,0.584-0.821,0.627-1.355L4.58,7.643
         l6.168,6.167c0.845,0.847,2.218,0.847,3.062,0c0.848-0.846,0.848-2.217,0.002-3.063L7.644,4.58z"/>
         </svg>
         Kiszerelések</a></li> -->

        <li><a href="customers.php">
                <svg id="Capa_1" enable-background="new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><g><path d="m256 207c47.972 0 87-39.028 87-87s-39.028-87-87-87-87 39.028-87 87 39.028 87 87 87zm0-144c31.43 0 57 25.57 57 57s-25.57 57-57 57-57-25.57-57-57 25.57-57 57-57z"/><path d="m432 207c30.327 0 55-24.673 55-55s-24.673-55-55-55-55 24.673-55 55 24.673 55 55 55zm0-80c13.785 0 25 11.215 25 25s-11.215 25-25 25-25-11.215-25-25 11.215-25 25-25z"/><path d="m444.1 241h-23.2c-27.339 0-50.939 16.152-61.693 39.352-22.141-24.17-53.944-39.352-89.228-39.352h-27.957c-35.284 0-67.087 15.182-89.228 39.352-10.755-23.2-34.355-39.352-61.694-39.352h-23.2c-37.44 0-67.9 30.276-67.9 67.49v109.21c0 16.156 13.194 29.3 29.412 29.3h91.727c1.538 17.9 16.59 32 34.883 32h199.957c18.292 0 33.344-14.1 34.883-32h90.679c16.796 0 30.46-13.61 30.46-30.34v-108.17c-.001-37.214-30.461-67.49-67.901-67.49zm-414.1 67.49c0-20.672 17.002-37.49 37.9-37.49h23.2c20.898 0 37.9 16.818 37.9 37.49v10.271c-10.087 26.264-8 42.004-8 98.239h-91zm331 135.489c0 2.769-2.252 5.021-5.021 5.021h-199.958c-2.769 0-5.021-2.253-5.021-5.021v-81.957c0-50.19 40.832-91.022 91.021-91.022h27.957c50.19 0 91.022 40.832 91.022 91.021zm121-27.319c0 .517 5.592.34-91 .34 0-56.651 2.071-72.018-8-98.239v-10.271c0-20.672 17.002-37.49 37.9-37.49h23.2c20.898 0 37.9 16.818 37.9 37.49z"/><path d="m80 207c30.327 0 55-24.673 55-55s-24.673-55-55-55-55 24.673-55 55 24.673 55 55 55zm0-80c13.785 0 25 11.215 25 25s-11.215 25-25 25-25-11.215-25-25 11.215-25 25-25z"/></g></svg>
                Vásárlók</a></li>
        <li><a href="admins.php">
                <svg id="Layer_1" enable-background="new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m272.066 512h-32.133c-25.989 0-47.134-21.144-47.134-47.133v-10.871c-11.049-3.53-21.784-7.986-32.097-13.323l-7.704 7.704c-18.659 18.682-48.548 18.134-66.665-.007l-22.711-22.71c-18.149-18.129-18.671-48.008.006-66.665l7.698-7.698c-5.337-10.313-9.792-21.046-13.323-32.097h-10.87c-25.988 0-47.133-21.144-47.133-47.133v-32.134c0-25.989 21.145-47.133 47.134-47.133h10.87c3.531-11.05 7.986-21.784 13.323-32.097l-7.704-7.703c-18.666-18.646-18.151-48.528.006-66.665l22.713-22.712c18.159-18.184 48.041-18.638 66.664.006l7.697 7.697c10.313-5.336 21.048-9.792 32.097-13.323v-10.87c0-25.989 21.144-47.133 47.134-47.133h32.133c25.989 0 47.133 21.144 47.133 47.133v10.871c11.049 3.53 21.784 7.986 32.097 13.323l7.704-7.704c18.659-18.682 48.548-18.134 66.665.007l22.711 22.71c18.149 18.129 18.671 48.008-.006 66.665l-7.698 7.698c5.337 10.313 9.792 21.046 13.323 32.097h10.87c25.989 0 47.134 21.144 47.134 47.133v32.134c0 25.989-21.145 47.133-47.134 47.133h-10.87c-3.531 11.05-7.986 21.784-13.323 32.097l7.704 7.704c18.666 18.646 18.151 48.528-.006 66.665l-22.713 22.712c-18.159 18.184-48.041 18.638-66.664-.006l-7.697-7.697c-10.313 5.336-21.048 9.792-32.097 13.323v10.871c0 25.987-21.144 47.131-47.134 47.131zm-106.349-102.83c14.327 8.473 29.747 14.874 45.831 19.025 6.624 1.709 11.252 7.683 11.252 14.524v22.148c0 9.447 7.687 17.133 17.134 17.133h32.133c9.447 0 17.134-7.686 17.134-17.133v-22.148c0-6.841 4.628-12.815 11.252-14.524 16.084-4.151 31.504-10.552 45.831-19.025 5.895-3.486 13.4-2.538 18.243 2.305l15.688 15.689c6.764 6.772 17.626 6.615 24.224.007l22.727-22.726c6.582-6.574 6.802-17.438.006-24.225l-15.695-15.695c-4.842-4.842-5.79-12.348-2.305-18.242 8.473-14.326 14.873-29.746 19.024-45.831 1.71-6.624 7.684-11.251 14.524-11.251h22.147c9.447 0 17.134-7.686 17.134-17.133v-32.134c0-9.447-7.687-17.133-17.134-17.133h-22.147c-6.841 0-12.814-4.628-14.524-11.251-4.151-16.085-10.552-31.505-19.024-45.831-3.485-5.894-2.537-13.4 2.305-18.242l15.689-15.689c6.782-6.774 6.605-17.634.006-24.225l-22.725-22.725c-6.587-6.596-17.451-6.789-24.225-.006l-15.694 15.695c-4.842 4.843-12.35 5.791-18.243 2.305-14.327-8.473-29.747-14.874-45.831-19.025-6.624-1.709-11.252-7.683-11.252-14.524v-22.15c0-9.447-7.687-17.133-17.134-17.133h-32.133c-9.447 0-17.134 7.686-17.134 17.133v22.148c0 6.841-4.628 12.815-11.252 14.524-16.084 4.151-31.504 10.552-45.831 19.025-5.896 3.485-13.401 2.537-18.243-2.305l-15.688-15.689c-6.764-6.772-17.627-6.615-24.224-.007l-22.727 22.726c-6.582 6.574-6.802 17.437-.006 24.225l15.695 15.695c4.842 4.842 5.79 12.348 2.305 18.242-8.473 14.326-14.873 29.746-19.024 45.831-1.71 6.624-7.684 11.251-14.524 11.251h-22.148c-9.447.001-17.134 7.687-17.134 17.134v32.134c0 9.447 7.687 17.133 17.134 17.133h22.147c6.841 0 12.814 4.628 14.524 11.251 4.151 16.085 10.552 31.505 19.024 45.831 3.485 5.894 2.537 13.4-2.305 18.242l-15.689 15.689c-6.782 6.774-6.605 17.634-.006 24.225l22.725 22.725c6.587 6.596 17.451 6.789 24.225.006l15.694-15.695c3.568-3.567 10.991-6.594 18.244-2.304z"/><path d="m256 367.4c-61.427 0-111.4-49.974-111.4-111.4s49.973-111.4 111.4-111.4 111.4 49.974 111.4 111.4-49.973 111.4-111.4 111.4zm0-192.8c-44.885 0-81.4 36.516-81.4 81.4s36.516 81.4 81.4 81.4 81.4-36.516 81.4-81.4-36.515-81.4-81.4-81.4z"/></svg>
                Adminok</a></li>
    </div>

    <script>
        function homePage(){
            window.open("../index.php", '_blank');
        }
    </script>